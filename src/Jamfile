#
# $Id$
#
# Part of edelib.
# Copyright (c) 2005-2007 EDE Authors.
#
# This program is licenced under terms of the 
# GNU General Public Licence version 2 or newer.
# See COPYING for details.

SubDir TOP src ;

XDGMIME_SRC = xdgmime.c 
			  xdgmimeglob.c 
			  xdgmimeint.c 
			  xdgmimemagic.c 
			  xdgmimealias.c 
			  xdgmimeparent.c 
			  xdgmimecache.c ;

XDGMIME = xdgmime/$(XDGMIME_SRC) ;

SOURCE = Config.cpp 
		 DesktopFile.cpp
		 StrUtil.cpp
		 Util.cpp
		 Nls.cpp
		 String.cpp
		 File.cpp
		 DateTime.cpp
		 Directory.cpp
		 Debug.cpp 
		 Sound.cpp 
		 IconTheme.cpp 
		 Color.cpp 
		 Run.cpp 
		 TiXml.cpp
		 TiXmlParser.cpp 
		 MimeType.cpp
		 DirWatch.cpp
		 rx/regex.c
		 Regex.cpp
		 $(XDGMIME) ;

# files that requires fltk or X11
#SOURCE_GUI = Ask.cpp
#			 ComboBox.cpp 

SOURCE_GUI = XSet.cpp
			 ExpandableGroup.cpp
			 IconChooser.cpp 
			 MessageBox.cpp
			 SevenSeg.cpp ;

if $(FLTKLIBS) {
	SOURCE += $(SOURCE_GUI) ;
} else {
	Echo "...building without FLTK support..." ;
}

LPATH = [ FFileName $(TOP) $(EDELIB_LIBDIR) $(EDELIB_NAME) ] ;

if $(SHARED) {
	MakeSharedLibrary $(LPATH) : $(SOURCE) : $(FLTKLIBS) $(SOUNDLIBS) ;
	InstallSharedLibrary $(libdir) : $(LPATH) ;
} else {
	MakeStaticLibrary $(LPATH) : $(SOURCE) ;
	InstallStaticLibrary $(libdir) : $(LPATH) ;
}
