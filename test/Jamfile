#
# $Id$
#
# Part of edelib.
# Copyright (c) 2005-2007 EDE Authors.
#
# This program is licenced under terms of the 
# GNU General Public Licence version 2 or newer.
# See COPYING for details.
#

SubDir TOP test ;

# shared library requires linkage with FLTK
if $(SHARED) {
	ADDONLIB = $(FLTK_LIBS_FULL) ;
}

TEST_FILES = 
	UnitTest.cpp 
	utest.cpp 
	util.cpp
	missing.cpp
	strutil.cpp 
	file.cpp
	directory.cpp
	datetime.cpp
	conf.cpp
	resource.cpp
	desktopfile.cpp
	string.cpp
	list.cpp
	regex.cpp
	color.cpp
	xml.cpp
	mime.cpp
	run_tests.cpp ;

if $(DBUS_LIBS) {
	TEST_FILES += dbus.cpp ;
}

# xsettings.cpp depends on X11 and FLTK_LIBS provides needed libraries
if $(FLTK_LIBS_FULL) {
	TEST_FILES += xsettings.cpp ;
	ObjectC++Flags xsettings.cpp : $(FLTK_CFLAGS) ;

	if ! $(SHARED) {
		ADDONLIB = $(FLTK_LIBS_FULL) ;
	}
}

MakeTest run_tests : $(TEST_FILES) : $(ADDONLIB) : "use-dbus" ;
LocalClean clean : [ FFileName $(TOP) test .foo.txt ] ;
LocalClean clean : [ FFileName $(TOP) test .ede.conf ] ;

#MakeTest perf/stringtok : perf/stringtok.cpp perf/strsplit.cpp ;

SubInclude TOP test xdg ;
