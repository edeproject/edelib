#
# $Id: Jamfile 3047 2011-09-26 13:11:12Z karijes $
#
# Copyright (c) 2005-2012 edelib authors
#
# This library is free software; you can redistribute it and/or
# modify it under the terms of the GNU Lesser General Public
# License as published by the Free Software Foundation; either
# version 2 of the License, or (at your option) any later version.
#
# This library is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
# Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public License
# along with this library. If not, see <http://www.gnu.org/licenses/>.

SubDir TOP tools edelib-dbus-explorer ;

if $(DBUS_LIBS) {
	rule GenHelp {
		LocalDepends $(<) : $(>) ;
		GenHelp1 $(<) : $(>) ;
	}

	actions piecemeal GenHelp1 {
		cat $(>) | ./gen-help.sh > $(<) ;
	}

	MakeTest edelib-dbus-explorer : edelib-dbus-explorer.cpp
  									ScriptEditor.cpp
  									ObjectTree.cpp
  									Entity.cpp	
  									ScriptDBus.cpp
  								  : -ledelib_dbus $(FLTK_LIBS) -ledelib $(DBUS_LIBS) ;

	LocalDepends edelib-dbus-explorer : Help.h ;
	GenHelp Help.h : edelib-dbus-explorer.txt ;
	Clean clean : Help.h ;

	InstallProgram $(bindir) : edelib-dbus-explorer ;
	 
}
